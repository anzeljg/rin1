// Copyright 2011 David Galles, University of San Francisco. All rights reserved.
//
// Redistribution and use in source and binary forms, with or without modification, are
// permitted provided that the following conditions are met:
//
// 1. Redistributions of source code must retain the above copyright notice, this list of
// conditions and the following disclaimer.
//
// 2. Redistributions in binary form must reproduce the above copyright notice, this list
// of conditions and the following disclaimer in the documentation and/or other materials
// provided with the distribution.
//
// THIS SOFTWARE IS PROVIDED BY <COPYRIGHT HOLDER> ``AS IS'' AND ANY EXPRESS OR IMPLIED
// WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED WARRANTIES OF MERCHANTABILITY AND
// FITNESS FOR A PARTICULAR PURPOSE ARE DISCLAIMED. IN NO EVENT SHALL <COPYRIGHT HOLDER> OR
// CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR
// CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR
// SERVICES; LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON
// ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING
// NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS SOFTWARE, EVEN IF
// ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.
//
// The views and conclusions contained in the software and documentation are those of the
// authors and should not be interpreted as representing official policies, either expressed
// or implied, of the University of San Francisco

function UndoDeleteCircle(t,i,e,o,s,h,l){this.objectID=t,this.posX=e,this.posY=o,this.nodeLabel=i,this.fgColor=s,this.bgColor=h,this.layer=l}var AnimatedCircle=function(t,i){this.objectID=t,this.label=i,this.radius=20,this.thickness=3,this.x=0,this.y=0,this.alpha=1,this.addedToScene=!0};AnimatedCircle.prototype=new AnimatedObject,AnimatedCircle.prototype.constructor=AnimatedCircle,AnimatedCircle.prototype.getTailPointerAttachPos=function(t,i,e){return this.getHeadPointerAttachPos(t,i)},AnimatedCircle.prototype.getWidth=function(){return 2*this.radius},AnimatedObject.prototype.setWidth=function(t){this.radius=t/2},AnimatedCircle.prototype.getHeadPointerAttachPos=function(t,i){var e=t-this.x,o=i-this.y,s=Math.sqrt(e*e+o*o);return 0==s?[this.x,this.y]:[this.x+e/s*this.radius,this.y+o/s*this.radius]},AnimatedCircle.prototype.draw=function(t){t.globalAlpha=this.alpha,this.highlighted&&(t.fillStyle="#ff0000",t.beginPath(),t.arc(this.x,this.y,this.radius+this.highlightDiff,0,2*Math.PI,!0),t.closePath(),t.fill()),t.fillStyle=this.backgroundColor,t.strokeStyle=this.foregroundColor,t.lineWidth=1,t.beginPath(),t.arc(this.x,this.y,this.radius,0,2*Math.PI,!0),t.closePath(),t.fill(),t.stroke(),t.textAlign="center",t.font="10px sans-serif",t.textBaseline="middle",t.lineWidth=1,t.fillStyle=this.foregroundColor;var i=this.label.split("\n");if(1==i.length)t.fillText(this.label,this.x,this.y);else if(i.length%2==0){var e,o=i.length/2;for(e=0;e<i.length/2;e++)t.fillText(i[o-e-1],this.x,this.y-12*(e+.5)),t.fillText(i[o+e],this.x,this.y+12*(e+.5))}else{var e,o=(i.length-1)/2;for(t.fillText(i[o],this.x,this.y),e=0;o>e;e++)t.fillText(i[o-(e+1)],this.x,this.y-12*(e+1)),t.fillText(i[o+(e+1)],this.x,this.y+12*(e+1))}},AnimatedCircle.prototype.createUndoDelete=function(){return new UndoDeleteCircle(this.objectID,this.label,this.x,this.y,this.foregroundColor,this.backgroundColor,this.layer)},UndoDeleteCircle.prototype=new UndoBlock,UndoDeleteCircle.prototype.constructor=UndoDeleteCircle,UndoDeleteCircle.prototype.undoInitialStep=function(t){t.addCircleObject(this.objectID,this.nodeLabel),t.setNodePosition(this.objectID,this.posX,this.posY),t.setForegroundColor(this.objectID,this.fgColor),t.setBackgroundColor(this.objectID,this.bgColor),t.setLayer(this.objectID,this.layer)};