// Copyright 2011 David Galles, University of San Francisco. All rights reserved.
//
// Redistribution and use in source and binary forms, with or without modification, are
// permitted provided that the following conditions are met:
//
// 1. Redistributions of source code must retain the above copyright notice, this list of
// conditions and the following disclaimer.
//
// 2. Redistributions in binary form must reproduce the above copyright notice, this list
// of conditions and the following disclaimer in the documentation and/or other materials
// provided with the distribution.
//
// THIS SOFTWARE IS PROVIDED BY <COPYRIGHT HOLDER> ``AS IS'' AND ANY EXPRESS OR IMPLIED
// WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED WARRANTIES OF MERCHANTABILITY AND
// FITNESS FOR A PARTICULAR PURPOSE ARE DISCLAIMED. IN NO EVENT SHALL <COPYRIGHT HOLDER> OR
// CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR
// CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR
// SERVICES; LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON
// ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING
// NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS SOFTWARE, EVEN IF
// ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.
//
// The views and conclusions contained in the software and documentation are those of the
// authors and should not be interpreted as representing official policies, either expressed
// or implied, of the University of San Francisco

function AnimatedLinkedList(t,i,s,e,h,n,o,l,r,a){this.init(t,i,s,e,h,n,o,l,r,a)}function UndoDeleteLinkedList(t,i,s,e,h,n,o,l,r,a,d,c,P,k,L){this.objectID=t,this.posX=e,this.posY=h,this.width=n,this.height=o,this.backgroundColor=c,this.foregroundColor=P,this.labels=s,this.linkPercent=l,this.verticalOrentation=a,this.linkAtEnd=r,this.labelColors=d,this.layer=k,this.numLabels=i,this.nullPointer=L}AnimatedLinkedList.prototype=new AnimatedObject,AnimatedLinkedList.prototype.constructor=AnimatedLinkedList,AnimatedLinkedList.superclass=AnimatedObject.prototype,AnimatedLinkedList.prototype.init=function(t,i,s,e,h,n,o,l,r,a){AnimatedLinkedList.superclass.init.call(this),this.w=s,this.h=e,this.backgroundColor=r,this.foregroundColor=a,this.vertical=n,this.linkPositionEnd=o,this.linkPercent=h,this.numLabels=l,this.labels=[],this.labelPosX=[],this.labelPosY=[],this.labelColors=[],this.nullPointer=!1,this.currentHeightDif=6,this.maxHeightDiff=5,this.minHeightDiff=3;for(var d=0;d<this.numLabels;d++)this.labels[d]="",this.labelPosX[d]=0,this.labelPosY[d]=0,this.labelColors[d]=this.foregroundColor;this.labels[0]=i,this.highlighted=!1,this.objectID=t},AnimatedLinkedList.prototype.left=function(){return this.vertical?this.x-this.w/2:this.linkPositionEnd?this.x-this.w*(1-this.linkPercent)/2:this.x-this.w*(this.linkPercent+1)/2},AnimatedLinkedList.prototype.setNull=function(t){this.nullPointer!=t&&(this.nullPointer=t)},AnimatedLinkedList.prototype.getNull=function(){return this.nullPointer},AnimatedLinkedList.prototype.right=function(){return this.vertical?this.x+this.w/2:this.linkPositionEnd?this.x+this.w*(this.linkPercent+1)/2:this.x+this.w*(1-this.linkPercent)/2},AnimatedLinkedList.prototype.top=function(){return this.vertical?this.linkPositionEnd?this.y-this.h*(1-this.linkPercent)/2:this.y-this.h*(1+this.linkPercent)/2:this.y-this.h/2},AnimatedLinkedList.prototype.bottom=function(){return this.vertical?this.linkPositionEnd?this.y+this.h*(1+this.linkPercent)/2:this.y+this.h*(1-this.linkPercent)/2:this.y+this.h/2},AnimatedLinkedList.prototype.resetTextPosition=function(){if(this.vertical){this.labelPosX[0]=this.x,this.labelPosY[0]=this.y+this.h*(1-this.linkPercent)/2*(1/this.numLabels-1);for(var t=1;t<this.numLabels;t++)this.labelPosY[t]=this.labelPosY[t-1]+this.h*(1-this.linkPercent)/this.numLabels,this.labelPosX[t]=this.x}else{this.labelPosY[0]=this.y,this.labelPosX[0]=this.x+this.w*(1-this.linkPercent)/2*(1/this.numLabels-1);for(var t=1;t<this.numLabels;t++)this.labelPosY[t]=this.y,this.labelPosX[t]=this.labelPosX[t-1]+this.w*(1-this.linkPercent)/this.numLabels}},AnimatedLinkedList.prototype.getTailPointerAttachPos=function(t,i,s){return this.vertical&&this.linkPositionEnd?[this.x,this.y+this.h/2]:this.vertical&&!this.linkPositionEnd?[this.x,this.y-this.h/2]:!this.vertical&&this.linkPositionEnd?[this.x+this.w/2,this.y]:[this.x-this.w/2,this.y]},AnimatedLinkedList.prototype.getHeadPointerAttachPos=function(t,i){return this.getClosestCardinalPoint(t,i)},AnimatedLinkedList.prototype.setWidth=function(t){this.w=t,this.resetTextPosition()},AnimatedLinkedList.prototype.setHeight=function(t){this.h=t,this.resetTextPosition()},AnimatedLinkedList.prototype.getWidth=function(){return this.w},AnimatedLinkedList.prototype.getHeight=function(){return this.h},AnimatedLinkedList.prototype.draw=function(t){var i,s;i=this.left(),s=this.top(),this.highlighted&&(t.strokeStyle="#ff0000",t.fillStyle="#ff0000",t.beginPath(),t.moveTo(i-this.highlightDiff,s-this.highlightDiff),t.lineTo(i+this.w+this.highlightDiff,s-this.highlightDiff),t.lineTo(i+this.w+this.highlightDiff,s+this.h+this.highlightDiff),t.lineTo(i-this.highlightDiff,s+this.h+this.highlightDiff),t.lineTo(i-this.highlightDiff,s-this.highlightDiff),t.closePath(),t.stroke(),t.fill()),t.strokeStyle=this.foregroundColor,t.fillStyle=this.backgroundColor,t.beginPath(),t.moveTo(i,s),t.lineTo(i+this.w,s),t.lineTo(i+this.w,s+this.h),t.lineTo(i,s+this.h),t.lineTo(i,s),t.closePath(),t.stroke(),t.fill();var e;if(this.vertical)for(i=this.left(),e=1;e<this.numLabels;e++)s=this.y+this.h*(1-this.linkPercent)*(e/this.numLabels-.5),t.beginPath(),t.moveTo(i,s),t.lineTo(i+this.w,s),t.closePath(),t.stroke();else for(s=this.top(),e=1;e<this.numLabels;e++)i=this.x+this.w*(1-this.linkPercent)*(e/this.numLabels-.5),t.beginPath(),t.moveTo(i,s),t.lineTo(i,s+this.h),t.closePath(),t.stroke();for(this.vertical&&this.linkPositionEnd?(i=this.left(),s=this.bottom()-this.h*this.linkPercent,t.beginPath(),t.moveTo(i+this.w,s),t.lineTo(i,s),this.nullPointer&&t.lineTo(this.startX+this.w,this.bottom()),t.closePath(),t.stroke()):this.vertical&&!this.linkPositionEnd?(i=this.left(),s=this.top()+this.h*this.linkPercent,t.beginPath(),t.moveTo(i+this.w,s),t.lineTo(i,s),this.nullPointer&&t.lineTo(i+this.w,this.top()),t.closePath(),t.stroke()):!this.vertical&&this.linkPositionEnd?(i=this.right()-this.w*this.linkPercent,s=this.top(),t.beginPath(),t.moveTo(i,s+this.h),t.lineTo(i,s),this.nullPointer&&t.lineTo(this.right(),s+this.h),t.closePath(),t.stroke()):(i=this.left()+this.w*this.linkPercent,s=this.top(),t.beginPath(),t.moveTo(i,s+this.h),t.lineTo(i,s),this.nullPointer&&t.lineTo(this.left(),s),t.closePath(),t.stroke()),t.textAlign="center",t.font="10px sans-serif",t.textBaseline="middle",t.lineWidth=1,this.resetTextPosition(),e=0;e<this.numLabels;e++)t.fillStyle=this.labelColors[e],t.fillText(this.labels[e],this.labelPosX[e],this.labelPosY[e])},AnimatedLinkedList.prototype.setTextColor=function(t,i){this.labelColors[i]=t},AnimatedLinkedList.prototype.getTextColor=function(t){return this.labelColors[t]},AnimatedLinkedList.prototype.getText=function(t){return this.labels[t]},AnimatedLinkedList.prototype.setText=function(t,i){this.labels[i]=t,this.resetTextPosition()},AnimatedLinkedList.prototype.createUndoDelete=function(){return new UndoDeleteLinkedList(this.objectID,this.numLabels,this.labels,this.x,this.y,this.w,this.h,this.linkPercent,this.linkPositionEnd,this.vertical,this.labelColors,this.backgroundColor,this.foregroundColor,this.layer,this.nullPointer)},AnimatedLinkedList.prototype.setHighlight=function(t){t!=this.highlighted&&(this.highlighted=t)},UndoDeleteLinkedList.prototype=new UndoBlock,UndoDeleteLinkedList.prototype.constructor=UndoDeleteLinkedList,UndoDeleteLinkedList.prototype.undoInitialStep=function(t){t.addLinkedListObject(this.objectID,this.labels[0],this.width,this.height,this.linkPercent,this.verticalOrentation,this.linkAtEnd,this.numLabels,this.backgroundColor,this.foregroundColor),t.setNodePosition(this.objectID,this.posX,this.posY),t.setLayer(this.objectID,this.layer),t.setNull(this.objectID,this.nullPointer);for(var i=0;i<this.numLabels;i++)t.setText(this.objectID,this.labels[i],i),t.setTextColor(this.objectID,this.labelColors[i],i)};