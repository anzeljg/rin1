// Copyright 2011 David Galles, University of San Francisco. All rights reserved.
//
// Redistribution and use in source and binary forms, with or without modification, are
// permitted provided that the following conditions are met:
//
// 1. Redistributions of source code must retain the above copyright notice, this list of
// conditions and the following disclaimer.
//
// 2. Redistributions in binary form must reproduce the above copyright notice, this list
// of conditions and the following disclaimer in the documentation and/or other materials
// provided with the distribution.
//
// THIS SOFTWARE IS PROVIDED BY <COPYRIGHT HOLDER> ``AS IS'' AND ANY EXPRESS OR IMPLIED
// WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED WARRANTIES OF MERCHANTABILITY AND
// FITNESS FOR A PARTICULAR PURPOSE ARE DISCLAIMED. IN NO EVENT SHALL <COPYRIGHT HOLDER> OR
// CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR
// CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR
// SERVICES; LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON
// ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING
// NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS SOFTWARE, EVEN IF
// ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.
//
// The views and conclusions contained in the software and documentation are those of the
// authors and should not be interpreted as representing official policies, either expressed
// or implied, of the University of San Francisco

// Values for xJust / yJust:  "center", "left", "right", "top", "bottom"

function UndoDeleteRectangle(t,i,e,h,s,o,n,l,r,a,g,f){this.objectID=t,this.posX=e,this.posY=h,this.width=s,this.height=o,this.xJustify=n,this.yJustify=l,this.backgroundColor=r,this.foregroundColor=a,this.nodeLabel=i,this.layer=f,this.highlighted=g}AnimatedRectangle=function(t,i,e,h,s,o,n,l){this.w=e,this.h=h,this.xJustify=s,this.yJustify=o,this.label=i,this.labelColor=l,this.backgroundColor=n,this.foregroundColor=l,this.labelColor=this.foregroundColor,this.highlighted=!1,this.objectID=t,this.nullPointer=!1,this.alpha=1,this.addedToScene=!0},AnimatedRectangle.prototype=new AnimatedObject,AnimatedRectangle.prototype.constructor=AnimatedRectangle,AnimatedRectangle.prototype.setNull=function(t){this.nullPointer=t},AnimatedRectangle.prototype.getNull=function(){return this.nullPointer},AnimatedRectangle.prototype.left=function(){return"left"==this.xJustify?this.x:"center"==this.xJustify?this.x-this.w/2:this.x-this.w},AnimatedRectangle.prototype.centerX=function(){return"center"==this.xJustify?this.x:"left"==this.xJustify?this.x+this.w/2:this.x-this.w/2},AnimatedRectangle.prototype.centerY=function(){return"center"==this.yJustify?this.y:"top"==this.yJustify?this.y+this.h/2:this.y-this.w/2},AnimatedRectangle.prototype.top=function(){return"top"==this.yJustify?this.y:"center"==this.yJustify?this.y-this.h/2:this.y-this.h},AnimatedRectangle.prototype.bottom=function(){return"top"==this.yJustify?this.y+this.h:"center"==this.yJustify?this.y+this.h/2:this.y},AnimatedRectangle.prototype.right=function(){return"left"==this.xJustify?this.x+this.w:"center"==this.xJustify?this.x+this.w/2:this.x},AnimatedRectangle.prototype.getHeadPointerAttachPos=function(t,i){return this.getClosestCardinalPoint(t,i)},AnimatedRectangle.prototype.setWidth=function(t){this.w=t},AnimatedRectangle.prototype.setHeight=function(t){this.h=t},AnimatedRectangle.prototype.getWidth=function(){return this.w},AnimatedRectangle.prototype.getHeight=function(){return this.h},AnimatedRectangle.prototype.draw=function(t){if(this.addedToScene){var i,e,h,s;t.globalAlpha=this.alpha,"left"==this.xJustify?(i=this.x,h=this.x+this.w/2):"center"==this.xJustify?(i=this.x-this.w/2,h=this.x):"right"==this.xJustify&&(i=this.x-this.w,h=this.x-this.w/2),"top"==this.yJustify?(e=this.y,s=this.y+this.h/2):"center"==this.yJustify?(e=this.y-this.h/2,s=this.y):"bottom"==this.yJustify&&(e=this.y-this.h,s=this.y-this.h/2),t.lineWidth=1,this.highlighted&&(t.strokeStyle="#ff0000",t.fillStyle="#ff0000",t.beginPath(),t.moveTo(i-this.highlightDiff,e-this.highlightDiff),t.lineTo(i+this.w+this.highlightDiff,e-this.highlightDiff),t.lineTo(i+this.w+this.highlightDiff,e+this.h+this.highlightDiff),t.lineTo(i-this.highlightDiff,e+this.h+this.highlightDiff),t.lineTo(i-this.highlightDiff,e-this.highlightDiff),t.closePath(),t.stroke(),t.fill()),t.strokeStyle=this.foregroundColor,t.fillStyle=this.backgroundColor,t.beginPath(),t.moveTo(i,e),t.lineTo(i+this.w,e),t.lineTo(i+this.w,e+this.h),t.lineTo(i,e+this.h),t.lineTo(i,e),t.closePath(),t.stroke(),t.fill(),this.nullPointer&&(t.beginPath(),t.moveTo(i,e),t.lineTo(i+this.w,e+this.h),t.closePath(),t.stroke()),t.fillStyle=this.labelColor,t.textAlign="center",t.font="10px sans-serif",t.textBaseline="middle",t.lineWidth=1,t.fillText(this.label,this.x,this.y)}},AnimatedRectangle.prototype.setText=function(t,i){this.label=t},AnimatedRectangle.prototype.createUndoDelete=function(){return new UndoDeleteRectangle(this.objectID,this.label,this.x,this.y,this.w,this.h,this.xJustify,this.yJustify,this.backgroundColor,this.foregroundColor,this.highlighted,this.layer)},AnimatedRectangle.prototype.setHighlight=function(t){this.highlighted=t},UndoDeleteRectangle.prototype=new UndoBlock,UndoDeleteRectangle.prototype.constructor=UndoDeleteRectangle,UndoDeleteRectangle.prototype.undoInitialStep=function(t){t.addRectangleObject(this.objectID,this.nodeLabel,this.width,this.height,this.xJustify,this.yJustify,this.backgroundColor,this.foregroundColor),t.setNodePosition(this.objectID,this.posX,this.posY),t.setLayer(this.objectID,this.layer),t.setHighlight(this.objectID,this.highlighted)};