// Copyright 2011 David Galles, University of San Francisco. All rights reserved.
//
// Redistribution and use in source and binary forms, with or without modification, are
// permitted provided that the following conditions are met:
//
// 1. Redistributions of source code must retain the above copyright notice, this list of
// conditions and the following disclaimer.
//
// 2. Redistributions in binary form must reproduce the above copyright notice, this list
// of conditions and the following disclaimer in the documentation and/or other materials
// provided with the distribution.
//
// THIS SOFTWARE IS PROVIDED BY <COPYRIGHT HOLDER> ``AS IS'' AND ANY EXPRESS OR IMPLIED
// WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED WARRANTIES OF MERCHANTABILITY AND
// FITNESS FOR A PARTICULAR PURPOSE ARE DISCLAIMED. IN NO EVENT SHALL <COPYRIGHT HOLDER> OR
// CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR
// CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR
// SERVICES; LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON
// ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING
// NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS SOFTWARE, EVEN IF
// ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.
//
// The views and conclusions contained in the software and documentation are those of the
// authors and should not be interpreted as representing official policies, either expressed
// or implied, of the University of San Francisco

function addLabelToAlgorithmBar(t){var e=document.createTextNode(t),i=document.createElement("td");i.appendChild(e);var n=document.getElementById("AlgorithmSpecificControls");return n.appendChild(i),e}function addCheckboxToAlgorithmBar(t){var e=document.createElement("input");e.setAttribute("type","checkbox"),e.setAttribute("value",t);var i=document.createTextNode(t),n=document.createElement("td");n.appendChild(e),n.appendChild(i);var o=document.getElementById("AlgorithmSpecificControls");return o.appendChild(n),e}function addRadioButtonGroupToAlgorithmBar(t,e){for(var i=[],n=document.createElement("table"),o=0;o<t.length;o++){var r=document.createElement("tr"),a=document.createElement("td"),d=document.createElement("input");d.setAttribute("type","radio"),d.setAttribute("name",e),d.setAttribute("value",t[o]),a.appendChild(d),r.appendChild(a);var h=document.createTextNode(" "+t[o]);a.appendChild(h),n.appendChild(r),i.push(d)}var l=document.createElement("td");l.appendChild(n);var c=document.getElementById("AlgorithmSpecificControls");return c.appendChild(l),i}function addControlToAlgorithmBar(t,e){var i=document.createElement("input");i.setAttribute("type",t),i.setAttribute("value",e),i.setAttribute("name",e),"Text"!==t&&i.setAttribute("class","btn btn-info");var n=document.createElement("td");n.style.padding="4px",n.appendChild(i);var o=document.getElementById("AlgorithmSpecificControls");return o.appendChild(n),i}function Algorithm(t){}function controlKey(t){return 8==t||9==t||37==t||38==t||39==t||40==t||46==t}Algorithm.prototype.setCodeAlpha=function(t,e){var i,n;for(i=0;i<t.length;i++)for(n=0;n<t[i].length;n++)this.cmd("SetAlpha",t[i][n],e)},Algorithm.prototype.addCodeToCanvasBase=function(t,e,i,n,o,r){r="undefined"!=typeof r?r:0;var a,d,h=Array(t.length);for(a=0;a<t.length;a++)for(h[a]=new Array(t[a].length),d=0;d<t[a].length;d++)h[a][d]=this.nextIndex++,this.cmd("CreateLabel",h[a][d],t[a][d],e,i+a*n,0),this.cmd("SetForegroundColor",h[a][d],o),this.cmd("SetLayer",h[a][d],r),d>0&&this.cmd("AlignRight",h[a][d],h[a][d-1]);return h},Algorithm.prototype.init=function(t,e,i){this.animationManager=t,t.addListener("AnimationStarted",this,this.disableUI),t.addListener("AnimationEnded",this,this.enableUI),t.addListener("AnimationUndo",this,this.undo),this.canvasWidth=e,this.canvasHeight=i,this.actionHistory=[],this.recordAnimation=!0,this.commands=[]},Algorithm.prototype.sizeChanged=function(t,e){},Algorithm.prototype.implementAction=function(t,e){var i=[t,e];this.actionHistory.push(i);var n=t(e);this.animationManager.StartNewAnimation(n)},Algorithm.prototype.isAllDigits=function(t){for(var e=t.length-1;e>=0;e--)if(t.charAt(e)<"0"||t.charAt(e)>"9")return!1;return!0},Algorithm.prototype.normalizeNumber=function(t,e){return this.isAllDigits(t)&&""!=t?("OOO0000"+t).substr(-e,e):t},Algorithm.prototype.disableUI=function(t){},Algorithm.prototype.enableUI=function(t){},Algorithm.prototype.returnSubmitFloat=function(t,e,i){return void 0!=i&&(t.size=i),function(n){var o=0;return window.event?o=n.keyCode:n.which&&(o=n.which),13!=o?controlKey(o)?void 0:109==o?void 0:(void 0!=i||t.value.length<i)&&o>=48&&57>=o?void 0:(void 0!=i||t.value.length<i)&&190==o&&-1==t.value.indexOf(".")?void 0:!1:void e()}},Algorithm.prototype.returnSubmit=function(t,e,i,n){return void 0!=i&&(t.size=i),function(o){var r=0;if(window.event?r=o.keyCode:o.which&&(r=o.which),13==r&&null!==e)e();else{if(190==r||59==r||173==r)return!1;if((void 0!=i&&t.value.length>=i||n&&(48>r||r>57))&&!controlKey(r))return!1}}},Algorithm.prototype.addReturnSubmit=function(t,e){t.onkeydown=this.returnSubmit(t,e,4,!1)},Algorithm.prototype.reset=function(){},Algorithm.prototype.undo=function(t){this.actionHistory.pop(),this.reset();var e=this.actionHistory.length;this.recordAnimation=!1;for(var i=0;e>i;i++)this.actionHistory[i][0](this.actionHistory[i][1]);this.recordAnimation=!0},Algorithm.prototype.clearHistory=function(){this.actionHistory=[]},Algorithm.prototype.cmd=function(){if(this.recordAnimation){var t=arguments[0];for(i=1;i<arguments.length;i++)t=t+"<;>"+String(arguments[i]);this.commands.push(t)}};