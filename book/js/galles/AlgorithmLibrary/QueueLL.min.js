// Copyright 2011 David Galles, University of San Francisco. All rights reserved.
//
// Redistribution and use in source and binary forms, with or without modification, are
// permitted provided that the following conditions are met:
//
// 1. Redistributions of source code must retain the above copyright notice, this list of
// conditions and the following disclaimer.
//
// 2. Redistributions in binary form must reproduce the above copyright notice, this list
// of conditions and the following disclaimer in the documentation and/or other materials
// provided with the distribution.
//
// THIS SOFTWARE IS PROVIDED BY <COPYRIGHT HOLDER> ``AS IS'' AND ANY EXPRESS OR IMPLIED
// WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED WARRANTIES OF MERCHANTABILITY AND
// FITNESS FOR A PARTICULAR PURPOSE ARE DISCLAIMED. IN NO EVENT SHALL <COPYRIGHT HOLDER> OR
// CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR
// CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR
// SERVICES; LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON
// ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING
// NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS SOFTWARE, EVEN IF
// ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.
//
// The views and conclusions contained in the software and documentation are those of the
// authors and should not be interpreted as representing official policies, either expressed
// or implied, of the University of San Francisco

function QueueLL(t,e,i){this.init(t,e,i)}function init(){var t=initCanvas();currentAlg=new QueueLL(t,canvas.width,canvas.height)}var LINKED_LIST_START_X=100,LINKED_LIST_START_Y=200,LINKED_LIST_ELEM_WIDTH=70,LINKED_LIST_ELEM_HEIGHT=30,LINKED_LIST_INSERT_X=250,LINKED_LIST_INSERT_Y=50,LINKED_LIST_ELEMS_PER_LINE=8,LINKED_LIST_ELEM_SPACING=100,LINKED_LIST_LINE_SPACING=100,TOP_POS_X=180,TOP_POS_Y=100,TOP_LABEL_X=130,TOP_LABEL_Y=100,TOP_ELEM_WIDTH=30,TOP_ELEM_HEIGHT=30,TAIL_POS_X=180,TAIL_LABEL_X=130,PUSH_LABEL_X=50,PUSH_LABEL_Y=30,PUSH_ELEMENT_X=120,PUSH_ELEMENT_Y=30,SIZE=32;QueueLL.prototype=new Algorithm,QueueLL.prototype.constructor=QueueLL,QueueLL.superclass=Algorithm.prototype,QueueLL.prototype.init=function(t,e,i){QueueLL.superclass.init.call(this,t,e,i),this.addControls(),this.nextIndex=0,this.commands=[],this.tail_pos_y=i-LINKED_LIST_ELEM_HEIGHT,this.tail_label_y=this.tail_pos_y,this.setup(),this.initialIndex=this.nextIndex},QueueLL.prototype.addControls=function(){this.controls=[],this.enqueueField=addControlToAlgorithmBar("Text",""),this.enqueueField.onkeydown=this.returnSubmit(this.enqueueField,this.enqueueCallback.bind(this),6),this.enqueueButton=addControlToAlgorithmBar("Button","Dodaj"),this.enqueueButton.onclick=this.enqueueCallback.bind(this),this.controls.push(this.enqueueField),this.controls.push(this.enqueueButton),this.dequeueButton=addControlToAlgorithmBar("Button","Odstrani"),this.dequeueButton.onclick=this.dequeueCallback.bind(this),this.controls.push(this.dequeueButton),this.clearButton=addControlToAlgorithmBar("Button","Sprazni vrsto"),this.clearButton.onclick=this.clearCallback.bind(this),this.controls.push(this.clearButton)},QueueLL.prototype.enableUI=function(t){for(var e=0;e<this.controls.length;e++)this.controls[e].disabled=!1},QueueLL.prototype.disableUI=function(t){for(var e=0;e<this.controls.length;e++)this.controls[e].disabled=!0},QueueLL.prototype.setup=function(){this.linkedListElemID=new Array(SIZE);for(var t=0;SIZE>t;t++)this.linkedListElemID[t]=this.nextIndex++;this.headID=this.nextIndex++,this.headLabelID=this.nextIndex++,this.tailID=this.nextIndex++,this.tailLabelID=this.nextIndex++,this.arrayData=new Array(SIZE),this.top=0,this.leftoverLabelID=this.nextIndex++,this.cmd("CreateLabel",this.headLabelID,"Glava",TOP_LABEL_X,TOP_LABEL_Y),this.cmd("CreateRectangle",this.headID,"",TOP_ELEM_WIDTH,TOP_ELEM_HEIGHT,TOP_POS_X,TOP_POS_Y),this.cmd("SetNull",this.headID,1),this.cmd("CreateLabel",this.tailLabelID,"Rep",TAIL_LABEL_X,this.tail_label_y),this.cmd("CreateRectangle",this.tailID,"",TOP_ELEM_WIDTH,TOP_ELEM_HEIGHT,TAIL_POS_X,this.tail_pos_y),this.cmd("SetNull",this.tailID,1),this.cmd("CreateLabel",this.leftoverLabelID,"",5,PUSH_LABEL_Y,0),this.animationManager.StartNewAnimation(this.commands),this.animationManager.skipForward(),this.animationManager.clearHistory()},QueueLL.prototype.resetLinkedListPositions=function(){for(var t=this.top-1;t>=0;t--){var e=(this.top-1-t)%LINKED_LIST_ELEMS_PER_LINE*LINKED_LIST_ELEM_SPACING+LINKED_LIST_START_X,i=Math.floor((this.top-1-t)/LINKED_LIST_ELEMS_PER_LINE)*LINKED_LIST_LINE_SPACING+LINKED_LIST_START_Y;this.cmd("Move",this.linkedListElemID[t],e,i)}},QueueLL.prototype.reset=function(){this.top=0,this.nextIndex=this.initialIndex},QueueLL.prototype.enqueueCallback=function(t){if(this.top<SIZE&&""!=this.enqueueField.value){var e=this.enqueueField.value;this.enqueueField.value="",this.implementAction(this.enqueue.bind(this),e)}},QueueLL.prototype.dequeueCallback=function(t){this.top>0&&this.implementAction(this.dequeue.bind(this),"")},QueueLL.prototype.clearCallback=function(t){this.implementAction(this.clearAll.bind(this),"")},QueueLL.prototype.enqueue=function(t){this.commands=new Array,this.arrayData[this.top]=t,this.cmd("SetText",this.leftoverLabelID,"");for(var e=this.top;e>0;e--)this.arrayData[e]=this.arrayData[e-1],this.linkedListElemID[e]=this.linkedListElemID[e-1];this.arrayData[0]=t,this.linkedListElemID[0]=this.nextIndex++;var i=this.nextIndex++,s=this.nextIndex++;return this.cmd("CreateLinkedList",this.linkedListElemID[0],"",LINKED_LIST_ELEM_WIDTH,LINKED_LIST_ELEM_HEIGHT,LINKED_LIST_INSERT_X,LINKED_LIST_INSERT_Y,.25,0,1,1),this.cmd("SetNull",this.linkedListElemID[0],1),this.cmd("CreateLabel",i,"Dodajam: ",PUSH_LABEL_X,PUSH_LABEL_Y),this.cmd("CreateLabel",s,t,PUSH_ELEMENT_X,PUSH_ELEMENT_Y),this.cmd("Step"),this.cmd("Move",s,LINKED_LIST_INSERT_X,LINKED_LIST_INSERT_Y),this.cmd("Step"),this.cmd("SetText",this.linkedListElemID[0],t),this.cmd("Delete",s),0==this.top?(this.cmd("SetNull",this.headID,0),this.cmd("SetNull",this.tailID,0),this.cmd("connect",this.headID,this.linkedListElemID[this.top]),this.cmd("connect",this.tailID,this.linkedListElemID[this.top])):(this.cmd("SetNull",this.linkedListElemID[1],0),this.cmd("Connect",this.linkedListElemID[1],this.linkedListElemID[0]),this.cmd("Step"),this.cmd("Disconnect",this.tailID,this.linkedListElemID[1])),this.cmd("Connect",this.tailID,this.linkedListElemID[0]),this.cmd("Step"),this.top=this.top+1,this.resetLinkedListPositions(),this.cmd("Delete",i),this.cmd("Step"),this.commands},QueueLL.prototype.dequeue=function(t){this.commands=new Array;var e=this.nextIndex++,i=this.nextIndex++;return this.cmd("SetText",this.leftoverLabelID,""),this.cmd("CreateLabel",e,"Odstranjujem ...",PUSH_LABEL_X,PUSH_LABEL_Y),this.cmd("CreateLabel",i,this.arrayData[this.top-1],LINKED_LIST_START_X,LINKED_LIST_START_Y),this.cmd("Move",i,PUSH_ELEMENT_X,PUSH_ELEMENT_Y),this.cmd("Step"),this.cmd("Disconnect",this.headID,this.linkedListElemID[this.top-1]),1==this.top?(this.cmd("SetNull",this.headID,1),this.cmd("SetNull",this.tailID,1),this.cmd("Disconnect",this.tailID,this.linkedListElemID[this.top-1])):this.cmd("Connect",this.headID,this.linkedListElemID[this.top-2]),this.cmd("Step"),this.cmd("Delete",this.linkedListElemID[this.top-1]),this.top=this.top-1,this.resetLinkedListPositions(),this.cmd("Delete",i),this.cmd("Delete",e),this.cmd("SetText",this.leftoverLabelID,"Odstranjeno: "+this.arrayData[this.top]),this.commands},QueueLL.prototype.clearAll=function(){this.commands=new Array;for(var t=0;t<this.top;t++)this.cmd("Delete",this.linkedListElemID[t]);return this.head=0,this.tail=0,this.cmd("SetNull",this.headID,1),this.cmd("SetNull",this.tailID,1),this.commands};var currentAlg;