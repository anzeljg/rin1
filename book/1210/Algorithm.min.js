// Copyright 2011 David Galles, University of San Francisco. All rights reserved.
//
// Redistribution and use in source and binary forms, with or without modification, are
// permitted provided that the following conditions are met:
//
// 1. Redistributions of source code must retain the above copyright notice, this list of
// conditions and the following disclaimer.
//
// 2. Redistributions in binary form must reproduce the above copyright notice, this list
// of conditions and the following disclaimer in the documentation and/or other materials
// provided with the distribution.
//
// THIS SOFTWARE IS PROVIDED BY <COPYRIGHT HOLDER> ``AS IS'' AND ANY EXPRESS OR IMPLIED
// WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED WARRANTIES OF MERCHANTABILITY AND
// FITNESS FOR A PARTICULAR PURPOSE ARE DISCLAIMED. IN NO EVENT SHALL <COPYRIGHT HOLDER> OR
// CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR
// CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR
// SERVICES; LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON
// ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING
// NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS SOFTWARE, EVEN IF
// ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.
//
// The views and conclusions contained in the software and documentation are those of the
// authors and should not be interpreted as representing official policies, either expressed
// or implied, of the University of San Francisco

function addLabelToAlgorithmBar(e){var t=document.createTextNode(e);var n=document.createElement("td");n.appendChild(t);var r=document.getElementById("AlgorithmSpecificControls");r.appendChild(n);return t}function addCheckboxToAlgorithmBar(e){var t=document.createElement("input");t.setAttribute("type","checkbox");t.setAttribute("value",e);var n=document.createTextNode(e);var r=document.createElement("td");r.appendChild(t);r.appendChild(n);var i=document.getElementById("AlgorithmSpecificControls");i.appendChild(r);return t}function addRadioButtonGroupToAlgorithmBar(e,t){var n=[];var r=document.createElement("table");for(var i=0;i<e.length;i++){var s=document.createElement("tr");var o=document.createElement("td");var u=document.createElement("input");u.setAttribute("type","radio");u.setAttribute("name",t);u.setAttribute("value",e[i]);o.appendChild(u);s.appendChild(o);var a=document.createTextNode(" "+e[i]);o.appendChild(a);r.appendChild(s);n.push(u)}var f=document.createElement("td");f.appendChild(r);var l=document.getElementById("AlgorithmSpecificControls");l.appendChild(f);return n}function addControlToAlgorithmBar(e,t){var n=document.createElement("input");n.setAttribute("type",e);n.setAttribute("value",t);n.setAttribute("name",t);if(e=="Button"){n.setAttribute("class","btn-blue")}var r=document.createElement("td");r.appendChild(n);var i=document.getElementById("AlgorithmSpecificControls");i.appendChild(r);return n}function Algorithm(e){}function controlKey(e){return e==8||e==9||e==37||e==38||e==39||e==40||e==46}Algorithm.prototype.init=function(e,t,n){this.animationManager=e;e.addListener("AnimationStarted",this,this.disableUI);e.addListener("AnimationEnded",this,this.enableUI);e.addListener("AnimationUndo",this,this.undo);this.canvasWidth=t;this.canvasHeight=n;this.actionHistory=[];this.recordAnimation=true;this.commands=[]};Algorithm.prototype.sizeChanged=function(e,t){};Algorithm.prototype.implementAction=function(e,t){var n=[e,t];this.actionHistory.push(n);var r=e(t);this.animationManager.StartNewAnimation(r)};Algorithm.prototype.isAllDigits=function(e){for(var t=e.length-1;t>=0;t--){if(e.charAt(t)<"0"||e.charAt(t)>"9"){return false}}return true};Algorithm.prototype.normalizeNumber=function(e,t){if(!this.isAllDigits(e)||e==""){return e}else{return("OOO0000"+e).substr(-t,t)}};Algorithm.prototype.disableUI=function(e){};Algorithm.prototype.enableUI=function(e){};Algorithm.prototype.returnSubmitFloat=function(e,t,n){if(n!=undefined){e.size=n}return function(r){var i=0;if(window.event){i=r.keyCode}else if(r.which){i=r.which}if(i==13){t()}else if(controlKey(i)){return}else if(i==109){return}else if((n!=undefined||e.value.length<n)&&i>=48&&i<=57){return}else if((n!=undefined||e.value.length<n)&&i==190&&e.value.indexOf(".")==-1){return}else{return false}}};Algorithm.prototype.returnSubmit=function(e,t,n,r){if(n!=undefined){e.size=n}return function(i){var s=0;if(window.event){s=i.keyCode}else if(i.which){s=i.which}if(s==13){t()}else if(s==59){return false}else if(n!=undefined&&e.value.length>=n||r&&(s<48||s>57)){if(!controlKey(s))return false}}};Algorithm.prototype.addReturnSubmit=function(e,t){e.onkeydown=this.returnSubmit(e,t,4,false)};Algorithm.prototype.reset=function(){};Algorithm.prototype.undo=function(e){this.actionHistory.pop();this.reset();var t=this.actionHistory.length;this.recordAnimation=false;for(var n=0;n<t;n++){this.actionHistory[n][0](this.actionHistory[n][1])}this.recordAnimation=true};Algorithm.prototype.clearHistory=function(){this.actionHistory=[]};Algorithm.prototype.cmd=function(){if(this.recordAnimation){var e=arguments[0];for(i=1;i<arguments.length;i++){e=e+"<;>"+String(arguments[i])}this.commands.push(e)}}